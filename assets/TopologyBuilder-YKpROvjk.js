import{j as e}from"./ui-vendor-C0RbxujU.js";import{R as t,a as s}from"./react-vendor-jGr1bFq6.js";const i=[{id:"small-office",name:"Small Office",description:"Basic star topology for small office (5-10 users)",devices:[{id:"d1",type:"router",label:"Gateway Router",position:{x:300,y:150},cost:500},{id:"d2",type:"switch",label:"Main Switch",position:{x:300,y:250},cost:300},{id:"d3",type:"workstation",label:"Workstation 1",position:{x:150,y:350},cost:1e3},{id:"d4",type:"workstation",label:"Workstation 2",position:{x:300,y:350},cost:1e3},{id:"d5",type:"server",label:"File Server",position:{x:450,y:350},cost:2e3}],connections:[{id:"c1",sourceId:"d1",targetId:"d2",type:"ethernet",length:5,cost:10},{id:"c2",sourceId:"d2",targetId:"d3",type:"ethernet",length:20,cost:40},{id:"c3",sourceId:"d2",targetId:"d4",type:"ethernet",length:15,cost:30},{id:"c4",sourceId:"d2",targetId:"d5",type:"ethernet",length:25,cost:50}]},{id:"enterprise",name:"Enterprise Network",description:"Redundant two-tier network with distribution and access layers",devices:[{id:"d1",type:"router",label:"Core Router 1",position:{x:250,y:100},cost:500},{id:"d2",type:"router",label:"Core Router 2",position:{x:450,y:100},cost:500},{id:"d3",type:"firewall",label:"Firewall",position:{x:350,y:50},cost:800},{id:"d4",type:"switch",label:"Distribution SW 1",position:{x:200,y:250},cost:300},{id:"d5",type:"switch",label:"Distribution SW 2",position:{x:500,y:250},cost:300},{id:"d6",type:"switch",label:"Access SW 1",position:{x:150,y:400},cost:300},{id:"d7",type:"switch",label:"Access SW 2",position:{x:350,y:400},cost:300},{id:"d8",type:"switch",label:"Access SW 3",position:{x:550,y:400},cost:300}],connections:[{id:"c1",sourceId:"d3",targetId:"d1",type:"fiber",length:10,cost:50},{id:"c2",sourceId:"d3",targetId:"d2",type:"fiber",length:10,cost:50},{id:"c3",sourceId:"d1",targetId:"d2",type:"fiber",length:15,cost:75},{id:"c4",sourceId:"d1",targetId:"d4",type:"fiber",length:20,cost:100},{id:"c5",sourceId:"d1",targetId:"d5",type:"fiber",length:30,cost:150},{id:"c6",sourceId:"d2",targetId:"d4",type:"fiber",length:30,cost:150},{id:"c7",sourceId:"d2",targetId:"d5",type:"fiber",length:20,cost:100},{id:"c8",sourceId:"d4",targetId:"d6",type:"ethernet",length:25,cost:50},{id:"c9",sourceId:"d4",targetId:"d7",type:"ethernet",length:25,cost:50},{id:"c10",sourceId:"d5",targetId:"d7",type:"ethernet",length:25,cost:50},{id:"c11",sourceId:"d5",targetId:"d8",type:"ethernet",length:25,cost:50}]},{id:"datacenter",name:"Data Center (Spine-Leaf)",description:"Modern spine-and-leaf architecture for east-west traffic",devices:[{id:"d1",type:"switch",label:"Spine 1",position:{x:250,y:100},cost:300},{id:"d2",type:"switch",label:"Spine 2",position:{x:450,y:100},cost:300},{id:"d3",type:"switch",label:"Leaf 1",position:{x:150,y:250},cost:300},{id:"d4",type:"switch",label:"Leaf 2",position:{x:350,y:250},cost:300},{id:"d5",type:"switch",label:"Leaf 3",position:{x:550,y:250},cost:300},{id:"d6",type:"server",label:"Server Rack 1",position:{x:150,y:380},cost:2e3},{id:"d7",type:"server",label:"Server Rack 2",position:{x:350,y:380},cost:2e3},{id:"d8",type:"server",label:"Server Rack 3",position:{x:550,y:380},cost:2e3}],connections:[{id:"c1",sourceId:"d1",targetId:"d3",type:"fiber",length:15,cost:75},{id:"c2",sourceId:"d1",targetId:"d4",type:"fiber",length:20,cost:100},{id:"c3",sourceId:"d1",targetId:"d5",type:"fiber",length:30,cost:150},{id:"c4",sourceId:"d2",targetId:"d3",type:"fiber",length:30,cost:150},{id:"c5",sourceId:"d2",targetId:"d4",type:"fiber",length:20,cost:100},{id:"c6",sourceId:"d2",targetId:"d5",type:"fiber",length:15,cost:75},{id:"c7",sourceId:"d3",targetId:"d6",type:"fiber",length:10,cost:50},{id:"c8",sourceId:"d4",targetId:"d7",type:"fiber",length:10,cost:50},{id:"c9",sourceId:"d5",targetId:"d8",type:"fiber",length:10,cost:50}]}],n={router:{label:"Router",cost:500,icon:"ðŸ”€"},switch:{label:"Switch",cost:300,icon:"ðŸ”Œ"},hub:{label:"Hub",cost:100,icon:"â­•"},firewall:{label:"Firewall",cost:800,icon:"ðŸ›¡ï¸"},server:{label:"Server",cost:2e3,icon:"ðŸ–¥ï¸"},workstation:{label:"Workstation",cost:1e3,icon:"ðŸ’»"},"wireless-ap":{label:"Wireless AP",cost:200,icon:"ðŸ“¡"},cloud:{label:"Cloud",cost:0,icon:"â˜ï¸"}},o=2,c=5,d=50,a=t.memo(({onAddDevice:t,showCost:s,showValidation:i,showHints:a,onToggleCost:l,onToggleValidation:r,onToggleHints:h})=>e.jsxs("div",{className:"device-palette",children:[e.jsx("h3",{children:"Devices"}),e.jsx("div",{className:"palette-grid",children:Object.keys(n).map(s=>e.jsxs("button",{onClick:()=>t(s),className:"palette-item",title:`${n[s].label} - $${n[s].cost}`,children:[e.jsx("span",{className:"device-icon",children:n[s].icon}),e.jsx("span",{className:"device-label",children:n[s].label}),e.jsxs("span",{className:"device-cost",children:["$",n[s].cost]})]},s))}),e.jsx("h3",{style:{marginTop:"2rem"},children:"Connection"}),e.jsxs("div",{className:"connection-types",children:[e.jsxs("div",{className:"connection-type",children:[e.jsx("strong",{children:"Ethernet:"})," $",o,"/m"]}),e.jsxs("div",{className:"connection-type",children:[e.jsx("strong",{children:"Fiber:"})," $",c,"/m"]}),e.jsxs("div",{className:"connection-type",children:[e.jsx("strong",{children:"Wireless:"})," $",d,"/setup"]})]}),e.jsxs("div",{className:"palette-options",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:s,onChange:e=>l(e.target.checked)}),"Show Costs"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:i,onChange:e=>r(e.target.checked)}),"Show Validation"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a,onChange:e=>h(e.target.checked)}),"Show Hints"]})]})]}));a.displayName="DeviceToolbox";const l=t.memo(({devices:t,connections:i,selectedDevice:o,dragging:c,connecting:d,validationIssues:a,showCost:l,onMouseDown:r,onMouseMove:h,onMouseUp:p,onStartConnection:g,onDeleteDevice:u,onDeleteConnection:y})=>{const m=s.useRef(null);return e.jsxs("div",{ref:m,className:"topology-canvas",onMouseMove:h,onMouseUp:p,onMouseLeave:p,children:[e.jsxs("svg",{className:"connections-layer",children:[i.map(s=>{const i=t.find(e=>e.id===s.sourceId),n=t.find(e=>e.id===s.targetId);if(!i||!n)return null;const o=i.position.x+40,c=i.position.y+40,d=n.position.x+40,a=n.position.y+40;return e.jsxs("g",{children:[e.jsx("line",{x1:o,y1:c,x2:d,y2:a,className:`connection connection-${s.type}`,strokeWidth:"2",onClick:()=>y(s.id),style:{cursor:"pointer"}}),l&&e.jsxs("text",{x:(o+d)/2,y:(c+a)/2,className:"connection-label",textAnchor:"middle",children:["$",s.cost]})]},s.id)}),d&&e.jsx("line",{x1:(t.find(e=>e.id===d)?.position.x??0)+40,y1:(t.find(e=>e.id===d)?.position.y??0)+40,x2:(t.find(e=>e.id===d)?.position.x??0)+40,y2:(t.find(e=>e.id===d)?.position.y??0)+40,className:"connection-temp",strokeWidth:"2",strokeDasharray:"5,5"})]}),t.map(t=>{const s=a.some(e=>e.deviceId===t.id);return e.jsxs("div",{className:`canvas-device ${o===t.id?"selected":""} ${s?"has-issue":""}`,style:{left:t.position.x,top:t.position.y,cursor:c===t.id?"grabbing":"grab"},onMouseDown:e=>r(t.id,e),children:[e.jsx("div",{className:"device-icon-large",children:n[t.type].icon}),e.jsxs("div",{className:"device-info",children:[e.jsx("div",{className:"device-name",children:t.label}),l&&e.jsxs("div",{className:"device-cost-badge",children:["$",t.cost]})]}),e.jsxs("div",{className:"device-actions",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),g(t.id)},className:"btn-connect "+(d===t.id?"active":""),title:"Connect",children:"ðŸ”—"}),e.jsx("button",{onClick:e=>{e.stopPropagation(),u(t.id)},className:"btn-delete",title:"Delete",children:"Ã—"})]})]},t.id)}),0===t.length&&e.jsxs("div",{className:"canvas-empty",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ—ï¸"}),e.jsx("h3",{children:"Start Building"}),e.jsx("p",{children:"Add devices from the palette to begin designing your network topology"})]})]})});l.displayName="BuilderCanvas";const r=t.memo(({detectedTopology:t,devices:i,connections:n,totalCost:o,validationIssues:c,showCost:d,showValidation:a,showHints:l})=>{const r=s.useMemo(()=>[{condition:0===i.length,message:"Start by adding devices from the palette on the left"},{condition:i.length>0&&0===n.length,message:"Click a device and then another to create connections"},{condition:"star"===t,message:"Star topology detected: Simple but has a single point of failure at the central device"},{condition:"mesh"===t,message:"Mesh topology detected: Maximum redundancy but high cable costs"},{condition:"ring"===t,message:"Ring topology detected: Each device has exactly two connections"},{condition:c.some(e=>"spof"===e.type),message:"Consider adding redundant connections to eliminate single points of failure"},{condition:o.total>1e4,message:"High cost detected - consider optimizing device selection or cable routes"}].filter(e=>e.condition).map(e=>e.message),[i,n,t,c,o]);return e.jsxs("div",{className:"builder-info",children:[e.jsxs("div",{className:"info-card",children:[e.jsx("h3",{children:"Detected Topology"}),e.jsx("div",{className:"topology-badge topology-badge-large",children:t}),e.jsxs("div",{className:"topology-stats",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Devices:"})," ",i.length]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Connections:"})," ",n.length]})]})]}),d&&e.jsxs("div",{className:"info-card",children:[e.jsx("h3",{children:"Cost Summary"}),e.jsxs("div",{className:"cost-breakdown",children:[e.jsxs("div",{className:"cost-row",children:[e.jsx("span",{children:"Devices:"}),e.jsxs("span",{children:["$",o.devices.toLocaleString()]})]}),e.jsxs("div",{className:"cost-row",children:[e.jsx("span",{children:"Cabling:"}),e.jsxs("span",{children:["$",o.connections.toLocaleString()]})]}),e.jsxs("div",{className:"cost-row cost-total",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",o.total.toLocaleString()]})]})]})]}),a&&c.length>0&&e.jsxs("div",{className:"info-card",children:[e.jsx("h3",{children:"Validation Issues"}),e.jsx("div",{className:"validation-list",children:c.map(t=>e.jsxs("div",{className:`validation-issue severity-${t.severity}`,children:[e.jsx("span",{className:"issue-icon",children:"error"===t.severity?"âŒ":"warning"===t.severity?"âš ï¸":"â„¹ï¸"}),e.jsx("span",{className:"issue-message",children:t.message})]},t.id))})]}),l&&r.length>0&&e.jsxs("div",{className:"info-card",children:[e.jsx("h3",{children:"ðŸ’¡ Best Practices"}),e.jsx("div",{className:"hints-list",children:r.slice(0,3).map((t,s)=>e.jsx("div",{className:"hint-item",children:t},s))})]})]})});function h(e,t){if(e.length<2)return"custom";const s=t.length,i=e.length,n=e.map(e=>t.filter(t=>t.sourceId===e.id||t.targetId===e.id).length),o=Math.max(...n);if(1===n.filter(e=>e===o).length&&o===i-1&&s===i-1)return"star";return s===i*(i-1)/2?"mesh":s===i&&n.every(e=>2===e)?"ring":s===i-1&&2===n.filter(e=>1===e).length?"bus":s>0?"hybrid":"custom"}function p(e,t){const s=e.reduce((e,t)=>e+t.cost,0),i=t.reduce((e,t)=>e+t.cost,0);return{devices:s,connections:i,total:s+i}}r.displayName="InfoPanel";const g=({className:t=""})=>{const o=function(){const[e,t]=s.useState([]),[i,n]=s.useState([]),[o,c]=s.useState(null),[d,a]=s.useState(null),[l,r]=s.useState(null),[h,p]=s.useState(!1),[g,u]=s.useState(!1),[y,m]=s.useState(!0),[v,x]=s.useState(!0),[b,j]=s.useState([]),[f,w]=s.useState(-1),C=s.useCallback((e,t)=>{const s=b.slice(0,f+1);s.push({devices:e,connections:t}),j(s),w(s.length-1)},[b,f]),I=s.useCallback(()=>{if(f>0){const e=b[f-1];t(e.devices),n(e.connections),w(f-1)}},[b,f]),N=s.useCallback(()=>{if(f<b.length-1){const e=b[f+1];t(e.devices),n(e.connections),w(f+1)}},[b,f]),k=s.useCallback(()=>{t([]),n([]),c(null),r(null),C([],[])},[C]),S=f>0,D=f<b.length-1;return{devices:e,connections:i,selectedDevice:o,dragging:d,connecting:l,showTemplates:h,showValidation:g,showCost:y,showHints:v,history:b,historyIndex:f,setDevices:t,setConnections:n,setSelectedDevice:c,setDragging:a,setConnecting:r,setShowTemplates:p,setShowValidation:u,setShowCost:m,setShowHints:x,saveToHistory:C,undo:I,redo:N,clearCanvas:k,canUndo:S,canRedo:D}}(),{devices:c,connections:d,selectedDevice:g,dragging:u,connecting:y,setDevices:m,setConnections:v,setSelectedDevice:x,setDragging:b,setConnecting:j,saveToHistory:f,undo:w,redo:C,clearCanvas:I}=o,[N,k]=s.useState(!1),[S,D]=s.useState(!0),[$,M]=s.useState(!1),[T,H]=s.useState(!0),{addDevice:R,deleteDevice:L}=function({devices:e,connections:t,setDevices:i,setConnections:o,setSelectedDevice:c,saveToHistory:d}){return{addDevice:s.useCallback(s=>{const o={id:`device-${Date.now()}`,type:s,label:`${n[s].label} ${e.length+1}`,position:{x:300+80*e.length%400,y:200+100*Math.floor(e.length/5)},cost:n[s].cost},c=[...e,o];i(c),d(c,t)},[e,t,i,d]),deleteDevice:s.useCallback(s=>{const n=e.filter(e=>e.id!==s),a=t.filter(e=>e.sourceId!==s&&e.targetId!==s);i(n),o(a),c(null),d(n,a)},[e,t,i,o,c,d])}}({devices:c,connections:d,setDevices:m,setConnections:v,setSelectedDevice:x,saveToHistory:f}),{startConnection:W,deleteConnection:V}=function({devices:e,connections:t,connecting:i,setConnecting:n,setConnections:o,saveToHistory:c}){return{startConnection:s.useCallback(e=>{n(i===e?null:e)},[i,n]),deleteConnection:s.useCallback(s=>{const i=t.filter(e=>e.id!==s);o(i),c(e,i)},[t,e,o,c])}}({devices:c,connections:d,connecting:y,setConnecting:j,setConnections:v,saveToHistory:f}),U=s.useCallback((e,t)=>{t.stopPropagation(),y||(b(e),x(e))},[y,b,x]),A=s.useCallback(e=>{if(!u)return;const t=e.currentTarget.getBoundingClientRect(),s=e.clientX-t.left,i=e.clientY-t.top;m(e=>e.map(e=>e.id===u?{...e,position:{x:Math.max(0,Math.min(s,t.width-80)),y:Math.max(0,Math.min(i,t.height-80))}}:e))},[u,m]),P=s.useCallback(()=>{u&&f(c,d),b(null)},[u,c,d,f,b]),B=s.useCallback(e=>{m(e.devices),v(e.connections),k(!1),f(e.devices,e.connections)},[m,v,f]),E=s.useCallback(()=>{const e={name:"Custom Topology",devices:c,connections:d,detectedType:h(c,d),cost:p(c,d),created:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`topology-${Date.now()}.json`,i.click(),URL.revokeObjectURL(s)},[c,d]),O=s.useMemo(()=>h(c,d),[c,d]),F=s.useMemo(()=>function(e,t){const s=[];e.forEach(i=>{const n=t.filter(e=>e.sourceId===i.id||e.targetId===i.id).length;n>3&&"switch"!==i.type&&"router"!==i.type&&s.push({id:`spof-${i.id}`,severity:"error",type:"spof",message:`${i.label} is a single point of failure with ${n} connections`,deviceId:i.id}),0===n&&e.length>1&&s.push({id:`isolated-${i.id}`,severity:"warning",type:"redundancy",message:`${i.label} is not connected to the network`,deviceId:i.id}),1!==n||"server"!==i.type&&"router"!==i.type||s.push({id:`single-conn-${i.id}`,severity:"warning",type:"redundancy",message:`${i.label} lacks redundant connections`,deviceId:i.id})}),e.filter(e=>"hub"===e.type).length>0&&s.push({id:"hub-warning",severity:"info",type:"best-practice",message:"Hubs create collision domains - consider using switches instead"});const i=e.some(e=>"firewall"===e.type);return e.some(e=>"router"===e.type)&&!i&&e.length>3&&s.push({id:"no-firewall",severity:"warning",type:"best-practice",message:"Consider adding a firewall for network security"}),s}(c,d),[c,d]),z=s.useMemo(()=>p(c,d),[c,d]),G=o.historyIndex>0,J=o.historyIndex<o.history.length-1;return e.jsxs("div",{className:`topology-builder ${t}`,children:[e.jsxs("div",{className:"builder-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"Network Topology Builder"}),e.jsx("p",{children:"Design and validate network topologies with drag-and-drop"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{onClick:()=>k(!N),className:"btn btn-secondary",children:"Templates"}),e.jsx("button",{onClick:I,className:"btn btn-outline",disabled:0===c.length,children:"Clear"}),e.jsx("button",{onClick:w,className:"btn btn-outline",disabled:!G,children:"Undo"}),e.jsx("button",{onClick:C,className:"btn btn-outline",disabled:!J,children:"Redo"}),e.jsx("button",{onClick:E,className:"btn btn-primary",disabled:0===c.length,children:"Export"})]})]}),e.jsxs("div",{className:"builder-layout",children:[e.jsx(a,{onAddDevice:R,showCost:S,showValidation:$,showHints:T,onToggleCost:D,onToggleValidation:M,onToggleHints:H}),e.jsxs("div",{className:"builder-main",children:[e.jsx(l,{devices:c,connections:d,selectedDevice:g,dragging:u,connecting:y,validationIssues:F,showCost:S,onMouseDown:U,onMouseMove:A,onMouseUp:P,onStartConnection:W,onDeleteDevice:L,onDeleteConnection:V,onDevicePositionChange:m}),e.jsx(r,{detectedTopology:O,devices:c,connections:d,totalCost:z,validationIssues:F,showCost:S,showValidation:$,showHints:T})]})]}),N&&e.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Load Template"}),e.jsx("button",{onClick:()=>k(!1),className:"modal-close",children:"Ã—"})]}),e.jsx("div",{className:"templates-grid",children:i.map(t=>e.jsxs("div",{className:"template-card",children:[e.jsx("h3",{children:t.name}),e.jsx("p",{children:t.description}),e.jsxs("div",{className:"template-stats",children:[e.jsxs("span",{children:[t.devices.length," devices"]}),e.jsxs("span",{children:[t.connections.length," connections"]})]}),e.jsx("button",{onClick:()=>B(t),className:"btn btn-primary",children:"Load Template"})]},t.id))})]})})]})};export{g as TopologyBuilder,g as default};
