import{j as e}from"./ui-vendor-DmKBlPLV.js";import{a as t}from"./react-vendor-CweoBIVe.js";import{l as r,i as o}from"./assessment-features-qUFVTjxj.js";import{u as n}from"./index-C8Aeuqah.js";import"./three-drei-Dy4NVo_U.js";import"./three-core-BicD_-Ba.js";import"./three-fiber-BHdQWHbZ.js";import"./state-vendor-BH-f4zot.js";const a=()=>{const a=n(e=>e.componentProgress),i=n(e=>e.getOverallProgress),s=t.useMemo(()=>{const e=Object.values(a).reduce((e,t)=>e+((null==t?void 0:t.timeSpent)||0),0),t=(()=>{try{const e=localStorage.getItem("quiz_attempts");return e?JSON.parse(e):[]}catch{return[]}})(),o=(()=>{try{const e=localStorage.getItem("scenario_attempts");return e?JSON.parse(e):[]}catch{return[]}})(),n=r.map(e=>{const r=a[e.id],o=t.filter(t=>{var r,o;return(null==(r=t.quizTitle)?void 0:r.includes(e.title))||(null==(o=t.quizId)?void 0:o.includes(e.code))}),n=o.map(e=>e.percentage),i=n.length>0?n.reduce((e,t)=>e+t,0)/n.length:0,s=(null==r?void 0:r.score)??i,l=(null==r?void 0:r.timeSpent)??0,c=(null==r?void 0:r.attempts)??o.length,m=c>0,u=(null==r?void 0:r.completed)?100:m?Math.min(Math.floor(c/3*100),95):0,d=s>=85?"expert":s>=70?"proficient":s>=50?"competent":"novice";return{loCode:e.code,completionPercentage:u,masteryLevel:d,timeSpent:l,attemptsCount:c,averageScore:s,lastPracticed:(null==r?void 0:r.lastVisited)?new Date(r.lastVisited):void 0,commonMistakes:s<70?[`Review ${e.title} fundamentals`,"Practice more exercises"]:[],suggestedActivities:u<100?[`Complete ${e.title} exercises`,"Take practice quiz","Review study materials"]:[]}}),i=n.filter(e=>e.averageScore>0).map(e=>e.averageScore),s=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:0,l={fundamentals:0,infrastructure:0,operations:0,security:0,troubleshooting:0},c={fundamentals:0,infrastructure:0,operations:0,security:0,troubleshooting:0};n.forEach(e=>{const t=r.find(t=>t.code===e.loCode);t&&e.averageScore>0&&(l[t.category]+=e.averageScore,c[t.category]++)}),Object.keys(l).forEach(e=>{c[e]>0&&(l[e]/=c[e])});const m=Object.entries(l).filter(([e,t])=>t>0).sort((e,t)=>t[1]-e[1]),u=m.slice(0,2).map(([e,t])=>`${e.charAt(0).toUpperCase()+e.slice(1)} (${Math.round(t)}%)`),d=m.slice(-2).filter(([e,t])=>t<70).map(([e,t])=>`${e.charAt(0).toUpperCase()+e.slice(1)} (${Math.round(t)}%)`),g=(e=>{const t=Object.values(e);if(0===t.length)return 0;const r=t.map(e=>e.lastVisited).filter(Boolean).map(e=>new Date(e).toDateString()).sort().reverse();if(0===r.length)return 0;let o=1;const n=(new Date).toDateString(),a=new Date(Date.now()-864e5).toDateString();if(r[0]!==n&&r[0]!==a)return 0;for(let i=1;i<r.length;i++){const e=new Date(r[i]),t=new Date(r[i-1]),n=Math.floor((t.getTime()-e.getTime())/864e5);if(1===n)o++;else if(n>1)break}return o})(a),p=Object.values(a).map(e=>e.lastVisited).filter(Boolean).map(e=>new Date(e)).sort((e,t)=>t.getTime()-e.getTime()),h=p.length>0?p[0]:new Date,f=n.filter(e=>100===e.completionPercentage).length,v=n.filter(e=>{const t=r.find(t=>t.code===e.loCode);return"security"===(null==t?void 0:t.category)}),S=v.length>0?v.reduce((e,t)=>e+t.averageScore,0)/v.length:0,y=o.filter(e=>"completed"===e.status).length;return{userId:"local-user",loProgress:n,badges:[{id:"subnet-master",name:"Subnet Master",description:"Master subnetting calculations",icon:"ðŸŽ¯",category:"technical",requirement:"Score 90%+ on subnetting LOs",earned:s>=90,earnedDate:s>=90?new Date:void 0,progress:Math.min(s,100)},{id:"protocol-pro",name:"Protocol Pro",description:"Master network protocols",icon:"ðŸŒ",category:"technical",requirement:"Complete all protocol LOs",earned:f>=5,progress:Math.floor(f/n.length*100)},{id:"security-expert",name:"Security Expert",description:"Master security fundamentals",icon:"ðŸ”’",category:"security",requirement:"Score 85%+ on security LOs",earned:S>=85,progress:Math.min(S,100)},{id:"troubleshooter",name:"Master Troubleshooter",description:"Expert in network troubleshooting",icon:"ðŸ”§",category:"troubleshooting",requirement:"Complete 5 troubleshooting scenarios",earned:y>=5,progress:Math.min(y/5*100,100)}],performanceTrends:[],scenarioAttempts:o,totalTimeSpent:e,studyStreak:g,lastActivity:h,examReadiness:{overallScore:s,domainScores:l,strengths:u,weaknesses:d,recommendedStudyTime:Math.max(20-Math.floor(s/5),0),readyForExam:s>=70&&f>=.8*n.length,confidence:s>=80&&f>=.9*n.length?"high":s>=60&&f>=.6*n.length?"medium":"low"},studyPlan:[{weekNumber:1,focus:d.length>0?d.map(e=>e.split(" (")[0]):["Fundamentals","Infrastructure"],activities:n.filter(e=>e.completionPercentage<100||e.averageScore<70).slice(0,5).map(e=>{const t=r.find(t=>t.code===e.loCode);return{loCode:e.loCode,component:(null==t?void 0:t.title)||"Study Component",estimatedTime:e.timeSpent>0?Math.max(60,120-e.timeSpent):90,priority:e.averageScore<50?"high":e.averageScore<70?"medium":"low"}}),goals:[d.length>0?`Improve ${d[0].split(" (")[0]}`:"Build strong foundation",`Complete ${n.filter(e=>e.completionPercentage<100).length} remaining LOs`,s<70?"Reach 70% average score":"Maintain high performance"]}]}},[a,i]);return e.jsx(o,{progressData:s})};export{a as default};
