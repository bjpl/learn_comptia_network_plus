import{j as e}from"./ui-vendor-C0RbxujU.js";import{a as t}from"./react-vendor-jGr1bFq6.js";import{l as r,i as o}from"./assessment-features-BM-NlzIq.js";import{u as a}from"./index-DKXwq6jg.js";import"./three-drei-D0qgDob-.js";import"./three-core-djLeyVVM.js";import"./three-fiber-v_RWOTGE.js";import"./state-vendor-Ij0BeMen.js";const n=()=>{const n=a(e=>e.componentProgress),s=a(e=>e.getOverallProgress),i=t.useMemo(()=>{const e=Object.values(n).reduce((e,t)=>e+(t?.timeSpent||0),0),t=(()=>{try{const e=localStorage.getItem("quiz_attempts");return e?JSON.parse(e):[]}catch{return[]}})(),o=(()=>{try{const e=localStorage.getItem("scenario_attempts");return e?JSON.parse(e):[]}catch{return[]}})(),a=r.map(e=>{const r=n[e.id],o=t.filter(t=>t.quizTitle?.includes(e.title)||t.quizId?.includes(e.code)),a=o.map(e=>e.percentage),s=a.length>0?a.reduce((e,t)=>e+t,0)/a.length:0,i=r?.score??s,c=r?.timeSpent??0,l=r?.attempts??o.length,m=l>0,u=r?.completed?100:m?Math.min(Math.floor(l/3*100),95):0,g=i>=85?"expert":i>=70?"proficient":i>=50?"competent":"novice";return{loCode:e.code,completionPercentage:u,masteryLevel:g,timeSpent:c,attemptsCount:l,averageScore:i,lastPracticed:r?.lastVisited?new Date(r.lastVisited):void 0,commonMistakes:i<70?[`Review ${e.title} fundamentals`,"Practice more exercises"]:[],suggestedActivities:u<100?[`Complete ${e.title} exercises`,"Take practice quiz","Review study materials"]:[]}}),s=a.filter(e=>e.averageScore>0).map(e=>e.averageScore),i=s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0,c={fundamentals:0,infrastructure:0,operations:0,security:0,troubleshooting:0},l={fundamentals:0,infrastructure:0,operations:0,security:0,troubleshooting:0};a.forEach(e=>{const t=r.find(t=>t.code===e.loCode);t&&e.averageScore>0&&(c[t.category]+=e.averageScore,l[t.category]++)}),Object.keys(c).forEach(e=>{l[e]>0&&(c[e]/=l[e])});const m=Object.entries(c).filter(([e,t])=>t>0).sort((e,t)=>t[1]-e[1]),u=m.slice(0,2).map(([e,t])=>`${e.charAt(0).toUpperCase()+e.slice(1)} (${Math.round(t)}%)`),g=m.slice(-2).filter(([e,t])=>t<70).map(([e,t])=>`${e.charAt(0).toUpperCase()+e.slice(1)} (${Math.round(t)}%)`),p=(e=>{const t=Object.values(e);if(0===t.length)return 0;const r=t.map(e=>e.lastVisited).filter(Boolean).map(e=>new Date(e).toDateString()).sort().reverse();if(0===r.length)return 0;let o=1;const a=(new Date).toDateString(),n=new Date(Date.now()-864e5).toDateString();if(r[0]!==a&&r[0]!==n)return 0;for(let s=1;s<r.length;s++){const e=new Date(r[s]),t=new Date(r[s-1]),a=Math.floor((t.getTime()-e.getTime())/864e5);if(1===a)o++;else if(a>1)break}return o})(n),d=Object.values(n).map(e=>e.lastVisited).filter(Boolean).map(e=>new Date(e)).sort((e,t)=>t.getTime()-e.getTime()),h=d.length>0?d[0]:new Date,f=a.filter(e=>100===e.completionPercentage).length,S=a.filter(e=>{const t=r.find(t=>t.code===e.loCode);return"security"===t?.category}),v=S.length>0?S.reduce((e,t)=>e+t.averageScore,0)/S.length:0,y=o.filter(e=>"completed"===e.status).length;return{userId:"local-user",loProgress:a,badges:[{id:"subnet-master",name:"Subnet Master",description:"Master subnetting calculations",icon:"ðŸŽ¯",category:"technical",requirement:"Score 90%+ on subnetting LOs",earned:i>=90,earnedDate:i>=90?new Date:void 0,progress:Math.min(i,100)},{id:"protocol-pro",name:"Protocol Pro",description:"Master network protocols",icon:"ðŸŒ",category:"technical",requirement:"Complete all protocol LOs",earned:f>=5,progress:Math.floor(f/a.length*100)},{id:"security-expert",name:"Security Expert",description:"Master security fundamentals",icon:"ðŸ”’",category:"security",requirement:"Score 85%+ on security LOs",earned:v>=85,progress:Math.min(v,100)},{id:"troubleshooter",name:"Master Troubleshooter",description:"Expert in network troubleshooting",icon:"ðŸ”§",category:"troubleshooting",requirement:"Complete 5 troubleshooting scenarios",earned:y>=5,progress:Math.min(y/5*100,100)}],performanceTrends:[],scenarioAttempts:o,totalTimeSpent:e,studyStreak:p,lastActivity:h,examReadiness:{overallScore:i,domainScores:c,strengths:u,weaknesses:g,recommendedStudyTime:Math.max(20-Math.floor(i/5),0),readyForExam:i>=70&&f>=.8*a.length,confidence:i>=80&&f>=.9*a.length?"high":i>=60&&f>=.6*a.length?"medium":"low"},studyPlan:[{weekNumber:1,focus:g.length>0?g.map(e=>e.split(" (")[0]):["Fundamentals","Infrastructure"],activities:a.filter(e=>e.completionPercentage<100||e.averageScore<70).slice(0,5).map(e=>{const t=r.find(t=>t.code===e.loCode);return{loCode:e.loCode,component:t?.title||"Study Component",estimatedTime:e.timeSpent>0?Math.max(60,120-e.timeSpent):90,priority:e.averageScore<50?"high":e.averageScore<70?"medium":"low"}}),goals:[g.length>0?`Improve ${g[0].split(" (")[0]}`:"Build strong foundation",`Complete ${a.filter(e=>e.completionPercentage<100).length} remaining LOs`,i<70?"Reach 70% average score":"Maintain high performance"]}]}},[n,s]);return e.jsx(o,{progressData:i})};export{n as default};
